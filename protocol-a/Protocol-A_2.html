<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on May, 19  2000 by texi2html 1.62 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>LysKOM Protocol A: Introduction</TITLE>

<META NAME="description" CONTENT="LysKOM Protocol A: Introduction">
<META NAME="keywords" CONTENT="LysKOM Protocol A: Introduction">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.62">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC15"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_1.html#SEC14"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC16"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 2. Introduction </H1>
<!--docid::SEC15::-->
<P>

This chapter introduces the concepts used in LysKOM, such as articles,
conferences and sessions. 
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC16">2.1 Articles</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC17">2.2 Conferences</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC19">2.3 The Misc-Info List</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC27">2.4 The Aux-Item List</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC33">2.5 Security</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC34">2.6 Membership and Reading</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC35">2.7 Client-Server Dialog</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<HR SIZE="6">
<A NAME="SEC16"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC17"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.1 Articles </H2>
<!--docid::SEC16::-->
<P>

An article is represented as a value of the type <CODE>Text-Stat</CODE> and a
string containing the article contents. An article will usually have one
or more recipients and may be a comment or footnote to other articles.
Each article is kept in the database until it is older than the
<CODE>nice</CODE> value of each of its recipients and it is not marked by any
user.
</P><P>

Currently there is a structure called a <CODE>Misc-Info-List</CODE> associated
with the <CODE>Text-Stat</CODE>. This list contains information about
recipients, senders, comments and footnotes. In the future the
information contained in the <CODE>Misc-Info-List</CODE> will be integrated
into the <CODE>Text-Stat</CODE>.
</P><P>

Every article has at least one number, the global article number. Global
numbers are assigned in ascending order to new articles, and are never
reused. If an article has recipients it will also have a local number
for each recipient. Local numbers are used in some data structures to
provide more compact storage and to provide an ordering of articles for
a particular recipient. Local numbers are assigned in ascending order
and are never reused for a particular recipient, though different
recipients will have articles with the same local numbers.
</P><P>

Occasionally it is necessary to map between local and global numbers.
The server call <CODE>local-to-global</CODE> does this.
</P><P>

<HR SIZE="6">
<A NAME="SEC17"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC16"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC18"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.2 Conferences </H2>
<!--docid::SEC17::-->
<P>

Conferences hold articles. They are represented in the protocol as a
data type called <CODE>Conference</CODE>. Each conference has a
<EM>creator</EM>, the person who created the conference, and a
<EM>supervisor</EM>, a conference whose members can modify the conference.
If the supervisor is a person, the members of that person's mailbox
are supervisors, which in most cases is only that person. We have also
introduced a type called <CODE>UConference</CODE> (pronounced micro-conf-stat)
which holds a subset of the information contained in the full
<CODE>Conference</CODE> type. Use the <CODE>UConference</CODE> type whenever
possible since it places a much smaller load on the LysKOM server.
</P><P>

Each conference has a type, which is essentially a collection of boolean
flags. Currently the flags <CODE>rd-prot</CODE>, <CODE>letterbox</CODE>,
<CODE>secret</CODE>, <CODE>original</CODE>,  <CODE>allow-anonymous</CODE> and 
<CODE>forbid-secret</CODE> are defined.
</P><P>

<DL COMPACT>
<DT><CODE>rd-prot</CODE>
<DD>The conference is protected from reading by non-members. Persons become
members by having one of the existing members or supervisors add him or
her to the conference. This restriction is enforced by the server.
<DT><CODE>original</CODE>
<DD>Conferences of this type are intended for original articles only.
Comments are to be redirected to the super-conference instead. This
restriction is currently not enforced by the server; clients must
implement this functionality.
<DT><CODE>letterbox</CODE>
<DD>Conferences of this type are connected to persons. Letters to a person
are sent to the mailbox and the name of the mailbox is synchronized
with the person name. It is currently not possible to explicitly set or
clear this flag on a conference.
<DT><CODE>secret</CODE>
<DD>Conferences of this type are secret. The server will not divulge any
information about the existence of the conference to persons who are not
members or supervisors of the conference. If a mailbox is made secret,
that person cannot log in using the person name, but must specify a
person number instead.
<DT><CODE>allow-anonymous</CODE>
<DD>Conferences of this type accept anonymous articles. Other conferences
will reject anonymous articles.
<DT><CODE>forbid-secret</CODE>
<DD>Conferences of this type do not allow secret members. If a conference is 
changed to this type, preexisting secret members remain secret.
</DL>
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC18">2.2.1 Persons and Sessions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<HR SIZE="6">
<A NAME="SEC18"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC17"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC17"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.2.1 Persons and Sessions </H3>
<!--docid::SEC18::-->
<P>

Persons are represented in the protocol by values of the type
<CODE>Person</CODE>. Associated with persons are statistics, a set of personal
flags and a set of privileges (see section <A HREF="Protocol-A_2.html#SEC33">2.5 Security</A>.) Persons are also
associated with a conference that has the same number as the person and
the <CODE>letterbox</CODE> bit set.
</P><P>

Connections to the server are represented as values of the type
<CODE>Static-Session-Info</CODE>, <CODE>Session-Info-Ident</CODE> or
<CODE>Session-Info</CODE>. Sessions have session number that are unique for
each session in the lifetime of the server execution. A single user can
have several sessions running at once. The session is not released until
the network connection is closed; a user can log in and out repeatedly
in a single session.
</P><P>

<HR SIZE="6">
<A NAME="SEC19"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC18"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC20"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.3 The Misc-Info List </H2>
<!--docid::SEC19::-->
<P>

The <CODE>Misc-Info</CODE> list contains tagged data. The fields are sent in
groups pertaining to a particular type of information: information about
recipient; carbon copy recipient; blank carbon copy recipient;
comment to; footnote to; comment in
and footnote in. The information groups may be sent in any order and
there may be any number of groups. Within each group the elements are
always sent in the order listed below.
</P><P>

<HR SIZE="6">
<A NAME="SEC20"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC21"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.1 Recipient </H3>
<!--docid::SEC20::-->
<P>

<DL COMPACT>
<DT><CODE>recpt</CODE>
<DD>Starts a recipient group. It contains the conference number of a
recipient of the article.
<DT><CODE>loc-no</CODE>
<DD>Always present within a recipient group. It contains the local text
number of the article in the conference specified by the preceding
<CODE>recpt</CODE> field.
<DT><CODE>rec-time</CODE>
<DD>If the recipient is a person, this element is added by the server when
the recipient marks the article as read. It contains the time when the
text was read.
<DT><CODE>sent-by</CODE>
<DD>Present when the recipient was added by a person other than the author
(after the article was created.) It contains the person number of the
person who added the recipient.
<DT><CODE>sent-at</CODE>
<DD>Present when the recipient was added after the article was created. It
contains the time when the recipient was added.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC21"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC20"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC22"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.2 Carbon Copy (CC) Recipient </H3>
<!--docid::SEC21::-->
<P>

The carbon-copy recipient group is identical to the recipient group
above. The difference is how new comments to an article with a recipient
or carbon-copy recipient are treated. A comment to an article is sent to
all recipients, but not to carbon-copy recipients of the original
article. This difference is enforced by the clients.
</P><P>

<DL COMPACT>
<DT><CODE>cc-recpt</CODE>
<DD>Starts a carbon-copy recipient group. It contains the conference number
of a carbon-copy recipient of the article.
<DT><CODE>loc-no</CODE>
<DD>Always present in a CC recipient group. It contains the local text
number of the article in the conference specified by the most recent
<CODE>cc-recpt</CODE> field.
<DT><CODE>rec-time</CODE>
<DD>Present after the CC recipient has read the article. It contains the
time when the article was read. Since only persons can read articles
this will only be seen if the CC recipient is a person.
<DT><CODE>sent-by</CODE>
<DD>Present when a CC recipient was added by a person other than the author
after the article had been created. It contains the person number of the
person who added the CC recipient.
<DT><CODE>sent-at</CODE>
<DD>Present when a CC recipient was added after the article had been
created. It is the time when the CC recipient was added.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC22"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC21"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC23"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC23"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.3 Blank Carbon Copy (BCC) Recipient </H3>
<!--docid::SEC22::-->
<P>

The blank carbon-copy recipient group is identical to the carbon-copy
recipient group above. The difference is the visibility of the
information. A carbon-copy recipient group is visible to anyone that is
allowed to fetch both the text status of the involved text and the
conference status of the involved conference.  (That is, as long as the
conference isn't secret everybody is allowed to see the carbon-copy
recipient group.)
</P><P>

A BCC recipient group is only visible to members and supervisors of the
recipient.  This is enforced by the server.
</P><P>

This type of group was introduced in protocol version 10.  When
old-style calls such as get-text-stat-old (see section <A HREF="Protocol-A_4.html#SEC123">4.27 get-text-stat-old [26] (1) Obsolete (10)</A>)
are used this will be converted to a CC recipient group by the server
for the benefit of clients that don't understand this group.
</P><P>

<DL COMPACT>
<DT><CODE>bcc-recpt</CODE>
<DD>Starts a blank carbon-copy recipient group. It contains the conference
number of a blank carbon-copy recipient of the article.
<DT><CODE>loc-no</CODE>
<DD>Always present in a BCC recipient group. It contains the local text
number of the article in the conference specified by the most recent
<CODE>bcc-recpt</CODE> field.
<DT><CODE>rec-time</CODE>
<DD>Present after the BCC recipient has read the article. It contains the
time when the article was read. Since only persons can read articles
this will only be seen if the BCC recipient is a person.
<DT><CODE>sent-by</CODE>
<DD>Present when a BCC recipient was added by a person other than the author
after the article had been created. It contains the person number of the
person who added the BCC recipient.
<DT><CODE>sent-at</CODE>
<DD>Present when a BCC recipient was added after the article had been
created. It is the time when the BCC recipient was added.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC23"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC24"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC24"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.4 Comment To </H3>
<!--docid::SEC23::-->
<P>

<DL COMPACT>
<DT><CODE>comm-to</CODE>
<DD>Always present when the article is a comment to another article.
<DT><CODE>sent-by</CODE>
<DD>Present when the article was added as a comment by a person other than
the author, after the article had been created. It contains the person
number of the person who added the article as a comment.
<DT><CODE>sent-at</CODE>
<DD>Present when the article was added as a comment after the article had
been created. It contains the time when it was added as a comment.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC24"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC23"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC25"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC25"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.5 Footnote To </H3>
<!--docid::SEC24::-->
<P>

<DL COMPACT>
<DT><CODE>footn-to</CODE>
<DD>Always present when the article is a footnote to another article.
<DT><CODE>sent-at</CODE>
<DD>Present when the article was added as a footnote after the article had
been created. It contains the time when it was added as a footnote.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC25"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC24"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC26"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC26"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.6 Comment in </H3>
<!--docid::SEC25::-->
<P>

<DL COMPACT>
<DT><CODE>comm-in</CODE>
<DD>Present when there are comments to this article. It contains the article
number which is a comment to this article.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC26"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC25"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.7 Footnote in </H3>
<!--docid::SEC26::-->
<P>

<DL COMPACT>
<DT><CODE>footn-in</CODE>
<DD>Present when there are footnotes to this article. It contains the
article number which is a footnote to this article.
</DL>
<P>

<HR SIZE="6">
<A NAME="SEC27"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC26"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC28"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.4 The Aux-Item List </H2>
<!--docid::SEC27::-->
<P>

The aux-item list is used as a generic extension mechanism in the LysKOM
server and in protocol A. 
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC28">2.4.1 About Aux-Items</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC29">2.4.2 Predefined Aux-Item Types</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC30">2.4.3 Client-Specific Aux-Item Types</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC31">2.4.4 Experimental Aux-Item Types</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="Protocol-A_2.html#SEC32">2.4.5 Defining New Aux-Item Types</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<HR SIZE="6">
<A NAME="SEC28"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC29"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.1 About Aux-Items </H3>
<!--docid::SEC28::-->
<P>

Aux-items were introduced in protocol version 10 as a mechanism for
extending the conference, text and server information structures without
changing the protocol. Persons were excluded since nobody could figure
out a case where setting an aux-item on the mailbox wasn't as good as
setting it on the person (another reason was that I was fed up writing
aux-item code by the time they were working on texts and conferences.)
</P><P>

The exact structure of an aux item is specified elsewhere (see section <A HREF="Protocol-A_3.html#SEC47">3.2 LysKOM Data Types</A>). The important fields here are the aux-no, tag and data
fields.
</P><P>

The aux-no field is used to identify an item. The aux-no together with a
text or conference number uniquely identifies a particular aux item.
Items are numbered from one and up within each item list. Once assigned,
the aux-no for an item is never changed. New items are guaranteed to
be assigned numbers that have never been used before within a particular
list.
</P><P>

The tag field identifies the type of aux item. It is used by the server
and by clients to figure out how to interpret the data field, and by the
server to decide if the item needs special treatment.
</P><P>

The data field is a simple string. The meaning of the string is
determined by the tag field, but since it is a string, clients that have
no understanding of the contents can successfully parse the item anyway
(in contrast to items in the misc-info list.)
</P><P>

<HR SIZE="6">
<A NAME="SEC29"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC28"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC30"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC30"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.2 Predefined Aux-Item Types </H3>
<!--docid::SEC29::-->
<P>

Predefined Aux-Item types are part of Protocol A, and clients should
support all of them. As with other parts of the protocol, changes to
these definitions will be made backwards-compatible, if possible.
</P><P>

Creation and deletion of items with a predefined type can cause
arbitrarily complex and wonderous behavior in the server. Furthermore,
the server may place constraints on the items with regard to content,
flags, who can create them, to what objects they can be attached and
so forth. The server may also silently enforce specific values for any
field of an item, regardless of what the client requests.
</P><P>

All items with tags in the range 1-9999 and 30000 and up are considered
predefined. If a client attempts to create an item with a tag in this
range, but the server has no idea what that tag means, the server will
return an error (illegal-aux-item.)
</P><P>

<DL COMPACT>
<DT><SAMP>`content-type [1] (text)'</SAMP>
<DD>Specifies the content type of a text. Data is a valid MIME type of one
of the special LysKOM types (see section <A HREF="Protocol-A_7.html#SEC306">7. LysKOM Content Types</A>.)
<P>

This item may only be set by the author of a text. The inherit, secret
and hide-owner bits are cleared. Only one content-type item can be
created per creator.
</P><P>

<DT><SAMP>`fast-reply [2] (text)'</SAMP>
<DD>Data is a string that constitutes a brief comment to the text. This
comment should be displayed immediately after the text body. 
<P>

An item of this type will never be inherited, can always be deleted, is
never anonymous and is never secret.
</P><P>

<DT><SAMP>`cross-reference [3] (text, conference)'</SAMP>
<DD>Data is a cross-reference to something else. The contents consist of a
letter, a number, a space and a descriptive text. The letter must be one
of T, C or P. T specifies that the cross-reference points to a text; C
that it points to a conference; and P that it points to a person. The
number is the id of the target of the cross reference. The descriptive
text is simly that, a text that describes the cross-reference. For
example, "T15 Check this out!" is a cross reference to text 15 with a
description that reads "Check this out!".
<P>

The inherit bit is automatically cleared and the item can always be
deleted. 
</P><P>

<DT><SAMP>`no-comments [4] (text)'</SAMP>
<DD>When this item is set, the author requests that nobody comments the
text. This is advisory only; it is still possible to write comments, but
clients should advise the user that this is contrary to the author's
wishes. Data should be empty.
<P>

This item may only be set by the author. The secret, hide-creator and
inherit bits are automatically cleared.
</P><P>

<DT><SAMP>`personal-comment [5] (text)'</SAMP>
<DD>When this item is set, the author requests only personal comments. This
is advisory only; it is still possible to create regular comments, but
clients should advise the user that the author prefers a personal
comment. Data should be empty.
<P>

This item may only be set by the author. The secret, hide-creator and
inherit bits are automatically cleared.
</P><P>

<DT><SAMP>`request-confirmation [6] (text)'</SAMP>
<DD>The author requests that everyone who reads the text confirms having
done so by creating read-confirmation items on the text. Clients should
ask users if they wish to confirm having read the text when it is
displayed. Data should be empty.
<P>

The hide-creator, secret and inherit bits are automatically cleared.
</P><P>

<DT><SAMP>`read-confirm [7] (text)'</SAMP>
<DD>This item can be taken as confirmation that the item creator has read
the text to which the item is attached. Clients should never ever create
this item without an explicit confirmation from the user that the text
has indeed been read.
<P>

The hide-creator, secret and inherit bits are automatically cleared.
Once created an item of this type cannot be deleted.
</P><P>

<DT><SAMP>`redirect [8] (conference)'</SAMP>
<DD><P>

This item indicates that texts should not be sent to the conference,
but be directed to some other target instead. Clients should notify
users that attempt to send texts to the conference of the redirect and
offer to send the text to the target of the redirect instead. A typical
use of this item would be a user that does not read LysKOM very often
and would like to advise other users to send e-mail instead.
</P><P>

Data is PROTOCOL:ADDRESS where PROTOCOL is either "E-mail" or "LysKOM",
and ADDRESS is either an e-mail address or a LysKOM conference. 
Hopefully we'll be able to replace this with a forwarding mechanism
later.
</P><P>

This item can only be set by the conference supervisor or in the case of
a mailbox, the person attached to the mailbox. The hide-creator and
secret bits are cleared automatically. Only one redirect can be
specified.
</P><P>

<DT><SAMP>`x-face [9] (conference)'</SAMP>
<DD><P>

Data is the face of the person in compface format. Cool, innit?
</P><P>

This item can only be set by the conference supervisor or in the case of
a mailbox, the person attached to the mailbox. The hide-creator and
secret bits are cleared automatically. 
</P><P>

<DT><SAMP>`alternate-name [10] (text, conference)'</SAMP>
<DD><P>

Data is a string that the client may use as an alternate to the name of
a conference or the subject of a text. Note that the server does not
match against this name when performing name lookups. Clients should
only display alternate names created by the user currently logged on.
</P><P>

The inherit flag is automatically cleared.
</P><P>

<DT><SAMP>`pgp-signature [11] (text)'</SAMP>
<DD><P>

Data is a PGP signature of the text. The signature should be the
equivalent of what "pgp -sba" in PGP 2.6.2 generates.
</P><P>

The secret, hide-creator and inherit bits are automatically cleared.
Signatures cannot be deleted once they have been created.
</P><P>

<DT><SAMP>`pgp-public-key [12] (letterbox)'</SAMP>
<DD><P>

Data is the public key of the person. It is desirable that the public
key contains a userid of the format "LysKOM <p<VAR>n</VAR>@<VAR>server</VAR>>+",
where <VAR>n</VAR> is the number of the person in the LysKOM server specified
in <VAR>server</VAR>. This rule is currently not enforced.
</P><P>

This item can only be set by the person himself. The hide-creator,
secret and inherit bits are automatically cleared.
</P><P>

<DT><SAMP>`e-mail-address [13] (conference, letterbox, server)'</SAMP>
<DD><P>

Data is an RFC 822-style email address. When set on a mailbox, it
should be the email address of the person. If the person has multiple
email addresses he may set serveral e-mail-address aux-items.
</P><P>

The meaning of this aux-item when set on a conference that isn't a
mailbox is vague. For a conference that is used as to import a mailing
list this should be the email address of the list. For other conferences 
we haven't really defined a sensible use.
</P><P>

When this aux-item is set on the server it shold contain the email
address of the administrator (or administrators.)
</P><P>

This aux-item can only be set by the supervisor of a conference or the
server administrator. The creator cannot be hidden.
</P><P>

<DT><SAMP>`faq-text [14] (conference, server)'</SAMP>
<DD><P>

Data is a decimal text number, which is a FAQ for the conference (or
server). Creating an item of this type automatically causes creation of
a faq-for-conf item.
</P><P>

This item can only be set by the supervisor or server administrator. The 
hide-creator, secret, and inherit bits are automatically cleared.
</P><P>

<DT><SAMP>`creating-software [15] (text)'</SAMP>
<DD><P>

Data is the name and version number of the client that created the
text.  This aux-item can only be set by the author of the text.  Once
set, it cannot be removed or changed.  A typical value would be
<SAMP>`elisp-client 0.47.3'</SAMP>.  Setting the creating-software aux-item is
optional.
</P><P>

The data should be the client name, a space, and the client version used
in the <CODE>set-client-version</CODE> call.  The server may enforce this
restriction.
</P><P>

<DT><SAMP>`mx-author [16] (text)'</SAMP>
<DD><P>

Data is a string containing the name of the author of an imported
e-mail. Clients should display this instead of the actual author of the
text, which will be an importer ID.
</P><P>

<DT><SAMP>`mx-from [17] (text)'</SAMP>
<DD><P>

Data is the e-mail address extracted from the <CODE>From</CODE> header of an
imported e-mail. This field can be used by clients to construct an
address for personal (e-mail) replies to an imported message.
</P><P>

<DT><SAMP>`mx-reply-to [18] (text)'</SAMP>
<DD><P>

Data is the e-mail address extracted from the <CODE>Reply-To</CODE> header of
an imported e-mail. Clients should use this for constructing replies to
imported messages.
</P><P>

<DT><SAMP>`mx-to [19] (text)'</SAMP>
<DD><P>

Data is a single e-mail address, and must be valid as the contents of an
e-mail <CODE>To</CODE> header. Multiple <CODE>mx-to</CODE> items may be present. For
imported messages, these items contain the <CODE>To</CODE> header of the
messages.
</P><P>

On messages created by a LysKOM person, the <CODE>mx-to</CODE> items are used
by the exporter to determine that the message is to be exported and
where to send it.
</P><P>

<DT><SAMP>`mx-cc [20] (text)'</SAMP>
<DD><P>

Same as <CODE>mx-to</CODE>, but applies to the <CODE>CC</CODE> header rather than
the <CODE>To</CODE> header.
</P><P>

<DT><SAMP>`mx-date [21] (text)'</SAMP>
<DD><P>

Data is the send data of an imported e-mail. Its format is "YYYY-MM-DD
hh:mm:ss TZ". YYYY is the year the message was sent, MM is the month, DD 
is the day, hh is the hour, mm is the minute and ss is the second. This
date and time are given in the timezone where the message was sent. TZ
is the timezone the date is valid for. It must be of the form "+hhmm" or 
"-hhmm", where hh is the number of hours offset from UTC and mm is the
number of minutes offset. Symbolic timezones are not permitted. The
timezone specification is recommended but optional, since it is not
always available.
</P><P>

Clients should display this date as the date a text was written since
the imported text will have been created at a later date. 
</P><P>

<DT><SAMP>`mx-message-id [22] (text)'</SAMP>
<DD><P>

Data is the <CODE>Message-ID</CODE> header of an imported e-mail. This is used 
by e-mail importers. LysKOM exporters should set the message ID to
<CODE>&#60;LysKOM%<VAR>text-no</VAR>@<VAR>server</VAR></CODE>, where <VAR>text-no</VAR> is the text
number and <VAR>server</VAR> is the name of the server. 
</P><P>

<DT><SAMP>`mx-in-reply-to [23] (text)'</SAMP>
<DD><P>

Data is a string containing one item from the <CODE>In-Reply-To</CODE> header
of an imported e-mail. If the <CODE>In-Reply-To</CODE> header contains several 
items, there will be several <CODE>mx-in-reply-to</CODE> items.
</P><P>

<DT><SAMP>`mx-misc [24] (text)'</SAMP>
<DD><P>

Data is a string that contains all of the headers, including
<CODE>Subject</CODE>, and including whose that are redundantly stored in other
aux-items. It is set by the importer. The fields are concatenated with
"\n". In other words, this item contains all headers of an imported
e-mail as they appear in the message.
</P><P>

<DT><SAMP>`mx-allow-filter [25] (conference)'</SAMP>
<DD><P>

Data is a regexp string which allows a sender (a field in the
email-header) to import the message. If none is present, the text is
imported. Several filters can exist, however, it is enough if one
positive filter matches (OR) and none negative dissallows (AND)
import. The order is of no importance. Can be set by an organizer of the
conference.
</P><P>

The regexp is case insensitive, and use a glob-pat style, it allows
[^]?*+(|) as constructs. Note that "." is literal. The importer is
required to check these when adding recipient of an imported text and
comply. Example of usage: (positive filter) "From:*.liu.se*",
"From:*jsk*". "From:*(jonas|jonka|jsk)*" Tests are not made on the
text-body.
</P><P>

However, if the string starts with a "!" the email will be rejected if
the there is a match (negative filter), even if one of the filter allowed it.  Example:
"!From:*aol*", "!Subject:*money*". 
</P><P>

<DT><SAMP>`mx-reject-forward [26] (conference)'</SAMP>
<DD><P>

Data is a string with either an email name on the same format as
aux-info redirect [8]. The mail is forwarded to this address if it was
rejected by "mx-import-filter".
</P><P>

<DT><SAMP>`notify-comments [27] (letterbox)'</SAMP>
<DD><P>

Data is a decimal text number that the user is interested in. Clients
should monitor this text for unread comments and present these to the
user in some convenient manner. This is typically used by users that
want to read comments to some text of theirs as soon as they arrive,
rather than in the normal reading order.
</P><P>

This item can only be set by the owner of the letterbox. No flags are
forced or cleared.
</P><P>

<DT><SAMP>`faq-for-conf [28] (text)'</SAMP>
<DD><P>

Data is a decimal number specifying the conference a certain text is a
FAQ for. The special number zero denotes that the text is a FAQ for the
entire system. Items of this kind can only be created by the LysKOM
server itself. Texts with this item are protected from garbage
collection.
</P><P>

</DL>
<P>

<HR SIZE="6">
<A NAME="SEC30"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC29"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC31"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC31"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.3 Client-Specific Aux-Item Types </H3>
<!--docid::SEC30::-->
<P>

Client-specific items do not cause the server to perform any magic. All
the flags (except the delete flag) are left untouched, the data is not
validated in any way, and anyone can create any item. If you need more
server support than this, your item should be on the predefined list.
</P><P>

All tags in the range 10000-19999 are reserved for clients. Blocks of
100 numbers at a time can be assigned to specific clients. A client
should never create items with tags in a range assigned to another
client or in an unassigned range. Assigned ranges will never change.
</P><P>

Currently, the following ranges are assigned to clients:
<UL>
<LI>10000-10099: The Elisp Client
</UL>
<P>

If you want a range of numbers, send e-mail to the LysKOM development
group.
</P><P>

<HR SIZE="6">
<A NAME="SEC31"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC30"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC32"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC32"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.4 Experimental Aux-Item Types </H3>
<!--docid::SEC31::-->
<P>

Experimental numbers are free for all. Use 'em any way you want. All
numbers in the range 20000-29999 are for experimental use. 
</P><P>

<HR SIZE="6">
<A NAME="SEC32"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC31"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.5 Defining New Aux-Item Types </H3>
<!--docid::SEC32::-->
<P>

If you want a new predefined item type, just document what it does, what
the data format looks like and what the server is to do with the item
and send this to the LysKOM development group. We'll assign a number to
your item and put the documentation in this document. 
</P><P>

If you're not sure what you want the data to look like yet, make a note
in your documentation that the data format might change. Once you have a
data format you're happy with, update the documentation so others may
use your item.
</P><P>

If you need serious magic in the server (more than can be specified with
the lyskomd configuration file), you'll probably have to write the code
yourself, or hope that the development group thinks your idea is so cool
we do the job for you.
</P><P>

The idea is not to reject any type of item, unless there's already an
item type that does the job just as well. Adding item types should be a
much less painful process than adding new calls.
</P><P>

<HR SIZE="6">
<A NAME="SEC33"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC32"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC34"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC34"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.5 Security </H2>
<!--docid::SEC33::-->
<P>

Security in LysKOM is based on two components. Each person has a set of
privileges and each session has a security level. Rights in the system
require both the sufficient privileges and a sufficient security
level. The privileges currently available are wheel, admin, statistic,
create-conf, create-pers and change-name. Security levels range from 0
to 255.
</P><P>

<DL COMPACT>
<DT><CODE>wheel</CODE>
<DD><EM>Normally not assigned</EM>
<DL COMPACT>
<DT>Level 0
<DD>Person may always log in, even when LysKOM is crowded.
<DT>Level 6
<DD>Person may set Priv-Bits for all persons.
<DT>Level 7
<DD>Person may set password for all persons.
<DT>Level 8
<DD>Person acts as supervisor for everything.
<DT>Level 10
<DD>Person can read all articles.
</DL>
<P>

<DT><CODE>admin</CODE>
<DD><EM>Normally not assigned</EM>
<DL COMPACT>
<DT>Level 1
<DD>Shut down the server<BR>
Set motd_of_kom<BR>
Read last_login
<DT>Level 2
<DD>Read status of secret conferences and persons<BR>
Read the protected parts of person and conference statuses<BR>
Read the entire text status, even when there are secret recipients
<DT>Level 3
<DD>Change everybody's names
<DT>Level 4
<DD>Add/remove members<BR>
Add/remove recipients to articles
<DT>Level 5
<DD>Set super-conference<BR>
Remove articles
<DT>Level 6
<DD>Set administrator
</DL>
<P>

<DT><CODE>statistic</CODE>
<DD><EM>Normally not assigned</EM>
<DL COMPACT>
<DT>Level 2
<DD>Read the statistics portions of persons, even if protected
</DL>
<P>

<DT><CODE>create_conf</CODE>
<DD><EM>Normally assigned</EM>
<DL COMPACT>
<DT>Level 0
<DD>Create conferences
</DL>
<P>

<DT><CODE>create_pers</CODE>
<DD><EM>Normally assigned</EM>
<DL COMPACT>
<DT>Level 0
<DD>Create persons
</DL>
<P>

</DL>
<P>

<HR SIZE="6">
<A NAME="SEC34"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC33"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC35"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC35"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.6 Membership and Reading </H2>
<!--docid::SEC34::-->
<P>

Persons' memberships in conferences are represented in the protocol as
arrays of <CODE>Membership</CODE>-typed values. This structure contains
information about how and when the membership was created and which
texts have been read in the conference.
</P><P>

There are two kinds of memberships. An active membership indicates that
the person is actively participating in the conference, wants to know if 
there are unread texts and wants to receive messages send to the
conference. A passive membership is similar to no membership at all. The 
person is still a member but will not receive messages sent to the
conference and will not be notified when there are new texts. From the
user's perspective, passive membership should be like no membership at
all, but the server still remembers what the user has read in the
conference while he or she was an active member. Since protocol version
10 a bit in the membership type field of the membership structure
indicates the type of membership. Previously the server did not support
passive memberships, but there was a convention that clients should
treat the priority level zero as a passive membership.
</P><P>

The membership record indicates which texts have been read through the
<CODE>last-text-read</CODE> and <CODE>read-texts</CODE> fields. All texts with local 
numbers up to <CODE>last-text-read</CODE> have been read. In addition, all
texts with local numbers contained in the <CODE>read-texts</CODE> array have
been read.
</P><P>

Finding out which articles a person has read in a particular conference
requires a few calls. Normally, a client will retrieve a batch of
perhaps 50 articles at a time. The outline of the process is as follows:
</P><P>

<OL>
<LI>Fetch the membership to get the <CODE>last-text-read</CODE>
<LI>Use see section <A HREF="Protocol-A_4.html#SEC277">4.104 local-to-global [103] (10) Recommended</A> to translate a number of local numbers
to global numbers. 
<LI>Remove the global numbers corresponding to local numbers contained
in <CODE>read-texts</CODE> from the result
<LI>Get and translate more texts as needed.
</OL>
<P>

The process is complicated because of the translation between local and
global text numbers. If the server does not implement the
see section <A HREF="Protocol-A_4.html#SEC277">4.104 local-to-global [103] (10) Recommended</A> call, it is possible to use the less
efficient but perfectly serviceable see section <A HREF="Protocol-A_4.html#SEC139">4.35 get-map [34] (1) Recommended</A> call instead.
</P><P>

<HR SIZE="6">
<A NAME="SEC35"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC34"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC36"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.7 Client-Server Dialog </H2>
<!--docid::SEC35::-->
<P>

The client-server dialog consists of two phases, establishing the connection
and the LysKOM session itself.
</P><P>

<HR SIZE="6">
<A NAME="SEC36"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC35"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC35"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.7.1 Connecting to the Server </H3>
<!--docid::SEC36::-->
<P>

A connection to the server is initiated by connecting to the appropriate
network port<A NAME="DOCF3" HREF="Protocol-A_fot.html#FOOT3">(3)</A> and
sending a single letter which is used to select a protocol version
followed by connection information required by that protocol. In
protocol A the connection information is a Hollerith string saying who
the user connecting is followed by a newline character.
</P><P>

When the server has accepted the connection its reply is
protocol-dependent. Protocol A servers will reply with the string
<CODE>LysKOM</CODE> on a single line if the connection attampt is successful.
</P><P>

<TABLE><tr><td>&nbsp;</td><td><pre>        % telnet kom.lysator.liu.se 4894
        Trying 130.236.254.151 ...
        Connected to varg.lysator.liu.se.
        Escape character is '^]'.
        A5Hbyers
        LysKOM
</pre></td></tr></table></P><P>

Besides the string "LysKOM", the server may respond with "%%Unsupported
protocol" or "%% No connections left.". 
</P><P>

The "%%Unsupported protocol" reply is sent if the server does not
understand the requested protocol.
</P><P>

The "%% No connections left" reply is sent if the server is not
accepting additional connections. This error is transient. The next
connection attempt may succeed. Clients should wait a few seconds before 
attempting to make another connection after receiving this error.
</P><P>

After connecting, calls to the server can be made. Most calls require
the user to log in, but some calls can be made without a log-in. Calls
to the server are made by sending a reference number followed by the
call as specified. The call <EM>must</EM> be terminated with a linefeed
character (ASCII 0x0A).
</P><P>

<TABLE><tr><td>&nbsp;</td><td><pre>        server-call ::=
                ( ref-no        :       INT32;
                  request       :       Protocol-Request;
                )
</pre></td></tr></table></P><P>

At some future point the server will reply with the result of the
request or an error code preceded by an indicator and the reference
number.
</P><P>

<TABLE><tr><td>&nbsp;</td><td><pre>        server-reply ::= ok-reply | error-reply | protocol-error;

        ok-reply ::=
                ( "="
                  ref-no        :       INT32;
                  reply-data;
                )

        error-reply ::=
                ( "%"
                  ref-no        :       INT32;
                  error-no      :       Error-No;
                  error-status  :       INT32;
                )

        error-no ::= INT32;

        protocol-error ::= "%% LysKOM protocol error."
</pre></td></tr></table></P><P>

Our notation is not flexible enough to specify the two-way nature of the
communication. <CODE>ref-no</CODE> in the reply is always the same as
<CODE>ref-no</CODE> in the corresponding request. <CODE>reply-data</CODE> depends on
which request was made and is specified together with each request.
</P><P>

Note that there is no whitespace after the initial indicator in the
reply.
</P><P>

Error reporting is covered in more detail in chapter section <A HREF="Protocol-A_6.html#SEC303">6. Error Codes</A>.
</P><P>

Data elements sent from the client to the server are separated by one or
more space characters (ASCII 32). An entire call is terminated by a
linefeed character (ASCII 10). 
</P><P>

Earlier versions of the protocol specified that data elements could be
separated by any number of linefeed (ASCII 10), return (ASCII 13), tab
(ASCII 9) or space (ASCII 32) characters. Servers should be forgiving
and understand requests using the older conventions, but clients must
conform to the current convention of separating data elements with
spaces and terminating all requests with a linefeed character.
</P><P>

If the request is syntactically incorrect, the server will respond with
the string "%% LysKOM protocol error." The server will attempt to
recover from the error, but in some cases complete recovery may not be
possible, which may result in one or more subsequent requests being
lost.
</P><P>

<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_2.html#SEC15"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_3.html#SEC37"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_11.html#SEC326">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="Protocol-A_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Staffan Malmgren</I> on <I>May, 19  2000</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
